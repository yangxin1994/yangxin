// Generated by CoffeeScript 1.6.3
$(function() {
  (function() {
    var height, path, places, projection, provinces, svg, width;
    width = 900;
    height = 648;
    projection = d3.geo.conicConformal().rotate([240, 0]).center([-10, 38]).parallels([29.5, 45.5]).scale(800).translate([width / 2, height / 2]).precision(.1);
    path = d3.geo.path().projection(projection);
    svg = d3.select("#canvas").insert("svg", "h2").attr("width", width).attr("height", height);
    provinces = svg.append("g").attr("id", "provinces");
    places = svg.append("g").attr("id", "places");
    return d3.json("/assets/pages/admin/statistics/cn-provinces.json", function(collection) {
      console.log(collection);
      provinces.selectAll("path").data(collection.features).enter().append("path").attr("d", path).attr("class", function(d) {
        return "province p_" + d.id;
      }).attr("data-name", function(d) {
        return d.properties.name;
      });
      return places.selectAll("path").data(collection.features).enter().append("text").attr("class", "place-label").attr("dy", ".35em").attr("transform", function(d) {
        return "translate(" + (path.centroid(d)) + ")";
      }).text(function(d) {
        return d.properties.name;
      });
    });
  })();
  return $(".province").click(function() {
    return alert("a");
  });
});
